---
import { formatDateFR } from '@utils/seo';

interface Props {
  title: string;
  description: string;
  href: string;
  date?: Date | string;
  category?: string;
  readingTime?: number;
  featured?: boolean;
}

const { title, description, href, date, category, readingTime, featured = false } = Astro.props;
---

<article class:list={['card group', featured && 'border-primary-200 bg-primary-50/50']}>
  <a href={href} class="block">
    {category && (
      <span class:list={['badge mb-3', featured ? 'badge-primary' : 'badge-secondary']}>
        {category}
      </span>
    )}

    <h3 class="text-xl font-semibold text-secondary-900 group-hover:text-primary-600 transition-colors mb-2 line-clamp-2">
      {title}
    </h3>

    <p class="text-secondary-600 mb-4 line-clamp-3">
      {description}
    </p>

    <div class="flex items-center justify-between text-sm text-secondary-500">
      {date && (
        <time datetime={new Date(date).toISOString()}>
          {formatDateFR(date)}
        </time>
      )}
      {readingTime && (
        <span>{readingTime} min de lecture</span>
      )}
    </div>
  </a>
</article>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
