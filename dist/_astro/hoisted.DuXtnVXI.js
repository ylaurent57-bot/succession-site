import"./hoisted.d6V8J2CV.js";const r=document.getElementById("devis-form"),d="YOUR_WEBHOOK_URL_HERE";r?.addEventListener("submit",async i=>{i.preventDefault();const e=r.querySelector('button[type="submit"]'),a=e.textContent;e.textContent="Envoi en cours...",e.disabled=!0;const c=new FormData(r),t={};if(c.forEach((s,o)=>{t[o]=s.toString()}),t.timestamp=new Date().toISOString(),t.website){window.location.href="/devis-succession/merci/";return}try{if((await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)typeof gtag=="function"&&gtag("event","generate_lead",{event_category:"Lead",event_label:t.type_succession,value:1}),window.location.href="/devis-succession/merci/";else throw new Error("Erreur serveur")}catch{e&&(e.textContent=a,e.disabled=!1);const o=r.querySelector(".error-message");o&&o.remove();const n=document.createElement("div");n.className="error-message bg-red-50 border border-red-200 text-red-700 rounded-lg p-4 mt-4",n.textContent="Une erreur est survenue. Veuillez rÃ©essayer ou nous contacter directement.",r.appendChild(n),setTimeout(()=>n.remove(),5e3)}});
