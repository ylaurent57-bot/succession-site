import"./hoisted.d6V8J2CV.js";const g=document.getElementById("simulator-form"),m=document.getElementById("results"),b=document.getElementById("results-content"),i=document.getElementById("spouse"),h=document.getElementById("spouse-option-container"),u=document.getElementById("children"),y=document.getElementById("other-children-container");function d(s){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(s)}function p(s){return new Intl.NumberFormat("fr-FR",{style:"percent",maximumFractionDigits:0}).format(s)}i.addEventListener("change",()=>{const s=i.value==="married",e=parseInt(u.value)>0;h.classList.toggle("hidden",!s||!e)});u.addEventListener("input",()=>{const s=i.value==="married",e=parseInt(u.value)>0;h.classList.toggle("hidden",!s||!e),y.classList.toggle("hidden",!s||!e)});g.addEventListener("submit",s=>{s.preventDefault();const e=parseFloat(document.getElementById("estate").value)||0,a=i.value,f=document.getElementById("spouse-option").value,t=parseInt(u.value)||0,v=document.getElementById("other-children").checked,n=[];let r=0,l=e;if(t===0)a==="married"?n.push({label:"Conjoint survivant",amount:e,note:"Totalité de la succession"}):a==="pacs"?(n.push({label:"Partenaire de PACS",amount:0,note:"Doit être désigné par testament"}),n.push({label:"Autres héritiers (parents, frères/sœurs...)",amount:e})):n.push({label:"Parents, frères/sœurs ou autres héritiers",amount:e}),r=0,l=e;else if(t===1?r=e/2:t===2?r=e*2/3:r=e*3/4,l=e-r,a==="married")if(v){const o=e/4,c=e*3/4;n.push({label:"Conjoint survivant",amount:o,note:"1/4 en pleine propriété (imposé si enfants d'autre lit)"}),n.push({label:`Enfants (${t}) - chacun`,amount:c/t,note:`${p(3/4)} répartis entre ${t} enfant(s)`})}else if(f==="usufruit")n.push({label:"Conjoint survivant",amount:e,note:"Usufruit de toute la succession"}),n.push({label:`Enfants (${t}) - chacun`,amount:e/t,note:"Nue-propriété de toute la succession"});else{const o=e/4,c=e*3/4;n.push({label:"Conjoint survivant",amount:o,note:"1/4 en pleine propriété"}),n.push({label:`Enfants (${t}) - chacun`,amount:c/t,note:`${p(3/4)} répartis entre ${t} enfant(s)`})}else{const o=e/t;n.push({label:`Enfants (${t}) - chacun`,amount:o,note:"Parts égales entre tous les enfants"}),a==="pacs"&&n.unshift({label:"Partenaire de PACS",amount:0,note:"Doit être désigné par testament (quotité disponible uniquement)"})}b.innerHTML=n.map(o=>`
        <div class="flex justify-between items-start py-4 border-b border-secondary-100">
          <div>
            <span class="font-medium text-secondary-900">${o.label}</span>
            ${o.note?`<p class="text-sm text-secondary-500 mt-1">${o.note}</p>`:""}
          </div>
          <span class="font-bold text-primary-700 text-lg">${d(o.amount)}</span>
        </div>
      `).join(""),document.getElementById("result-reserve").textContent=d(r),document.getElementById("result-quotite").textContent=d(l),m.classList.remove("hidden"),m.scrollIntoView({behavior:"smooth",block:"start"})});
